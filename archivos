#include <iostream>
#include "conio.h"
#include <stdio.h>

using namespace std;

struct regAmigo{
	char nombre[30];
	int  edad;
	char sexo;
	char estado;
};

void crearArchivo(char nomArch[]){
	FILE *ptr;
	ptr= fopen(nomArch,"wb");
	fclose(ptr);
}
void adicionarRegistro (){
	FILE *ptr;
	regAmigo reg;

	cout<<"Ingrese nombre:  ";
	do{
		gets(reg.nombre);
	}while(strlen(reg.nombre) == 0);

	do{
	cout<<"Ingrese edad:   ";
	cin>> reg.edad;
	}while(reg.edad < 1 || reg.edad > 100);
	
	do{
	cout<<"Ingrese Sexo (F o M):   ";
	cin>> reg.sexo;
	}while(reg.sexo != 'F' && reg.sexo != 'M');

	reg.estado = 'A';

	ptr = fopen("amigos.dat","ab");
	fwrite(&reg, sizeof(reg),1,ptr);
	fclose(ptr);
	}
void mostrarArchivos (){
	FILE *ptr;
	regAmigo reg;
	ptr=fopen("amigos.dat","rb");
	if(ptr!= NULL){
		cout<<endl;
			cout<<"---------------------------------------------------"<<endl;
			cout<<"\tNOMBRE               |EDAD    |SEXO   "<<endl;
		fread(&reg,sizeof(reg),1,ptr);
		while(feof(ptr)== false){
			cout<<endl;
			cout<<"\t"<<reg.nombre<<" "<<reg.edad<<"  "<<reg.sexo;
			fread(&reg,sizeof(reg),1,ptr);
		}
		fclose(ptr);
	}else{
		cout<<"no existe";
	}
}

	
void main (){
	//crearArchivo("amigos.dat");
	int op;
	cout<<"1. Adicionar"<<endl;
	cout<<"2. Mostrar "<<endl;
	cout<<"0. Salir"<<endl;
	cin>>op;

	switch(op){
	case 1:{
		adicionarRegistro ();
		   break;
		   }
	case 2:{
		mostrarArchivos ();
		   break;
		   }
	case 0:{
		   cout<<"salir"<<endl;
		   break;
		   }
	default:{
			cout<<"Valor invalido"<<endl;
			break;
			}
	}

		getch();
}
